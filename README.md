# μνΌ ν¬μμ ν¬νΈν΄λ¦¬μ¤ λ¦¬ν¬νΈ (Super Investor Portfolio Report)

μ£Όμ” ν¬μμλ“¤μ ν¬νΈν΄λ¦¬μ¤ μ •λ³΄λ¥Ό μμ§‘ν•κ³  λ°μ΄ν„°λ² μ΄μ¤μ— μ €μ¥ν•μ—¬ λ¶„μ„ν•  μ μλ” ν”„λ΅μ νΈμ…λ‹λ‹¤.

## π“‹ κ°μ”

μ΄ ν”„λ΅μ νΈλ” Dataroma.comμ—μ„ μƒμ„ ν¬μμλ“¤μ ν¬νΈν΄λ¦¬μ¤ λ°μ΄ν„°λ¥Ό μμ§‘ν•κ³ , μ΄λ¥Ό MySQL λ°μ΄ν„°λ² μ΄μ¤μ— μ €μ¥ν•©λ‹λ‹¤. μμ§‘λ λ°μ΄ν„°λ¥Ό λ°”νƒ•μΌλ΅ ν¬νΈν΄λ¦¬μ¤ κµ¬μ„± λ° λ³€λ™ μ‚¬ν•­μ„ μ‹κ°ν™”ν•μ—¬ λ³΄κ³ μ„λ¥Ό μƒμ„±ν•  μ μμµλ‹λ‹¤.

## π μ£Όμ” κΈ°λ¥

- μƒμ„ ν¬μμ μ •λ³΄ μλ™ ν¬λ΅¤λ§
- ν¬νΈν΄λ¦¬μ¤ μƒμ„Έ μ •λ³΄ μμ§‘ (μΆ…λ©, λΉ„μ¤‘, λ³€λ™ μ‚¬ν•­ λ“±)
- MySQL λ°μ΄ν„°λ² μ΄μ¤μ— λ°μ΄ν„° μ €μ¥
- ν¬νΈν΄λ¦¬μ¤ μ‹κ°ν™” λ¦¬ν¬νΈ μƒμ„±
- ν…”λ κ·Έλ¨ μ•λ¦Ό κΈ°λ¥
- API μ—°λ™ κΈ°λ¥
- λ΅κΉ… μ‹μ¤ν…μΌλ΅ ν”„λ΅κ·Έλ¨ μ‹¤ν–‰ μ¶”μ 

## π”§ κΈ°μ  μ¤νƒ

- **μ–Έμ–΄**: Python 3.x
- **λ°μ΄ν„°λ² μ΄μ¤**: MySQL
- **μ£Όμ” λΌμ΄λΈλ¬λ¦¬**:
  - `requests`, `BeautifulSoup4`: μ›Ή ν¬λ΅¤λ§
  - `pymysql`: MySQL λ°μ΄ν„°λ² μ΄μ¤ μ—°κ²°
  - `dotenv`: ν™κ²½ λ³€μ κ΄€λ¦¬
  - `logging`: λ΅κ·Έ κ΄€λ¦¬
  - `fake_useragent`: ν¬λ΅¤λ§μ© User-Agent μƒμ„±
  - `echarts`: λ°μ΄ν„° μ‹κ°ν™” (λ¦¬ν¬νΈ)
  - `python-telegram-bot`: ν…”λ κ·Έλ¨ λ©”μ‹μ§€ λ°μ†΅

## π“¦ μ„¤μΉ λ°©λ²•

1. μ €μ¥μ† ν΄λ΅ 

```bash
git clone https://github.com/your-username/super-investor-report.git
cd super-investor-report
```

2. κ°€μƒν™κ²½ μƒμ„± λ° ν™μ„±ν™” (μ„ νƒμ‚¬ν•­)

```bash
python -m venv venv
# Windows
venv\Scripts\activate
# Mac/Linux
source venv/bin/activate
```

3. ν•„μ”ν• ν¨ν‚¤μ§€ μ„¤μΉ

```bash
pip install -r requirements.txt
```

4. ν™κ²½ λ³€μ μ„¤μ •
   
`.env` νμΌμ„ ν”„λ΅μ νΈ λ£¨νΈ λ””λ ‰ν† λ¦¬μ— μƒμ„±ν•κ³  λ‹¤μ λ‚΄μ©μ„ μ¶”κ°€ν•©λ‹λ‹¤:

```
DB_HOST=localhost
DB_USER=your_username
DB_PASSWORD=your_password
DB_NAME=investor_portfolio_db
DB_PORT=3306

# ν…”λ κ·Έλ¨ λ΄‡ μ„¤μ • (μ„ νƒμ‚¬ν•­)
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
TELEGRAM_CHAT_ID=your_chat_id

# API ν‚¤ μ„¤μ • (μ„ νƒμ‚¬ν•­)
API_KEY=your_api_key
```

5. λ°μ΄ν„°λ² μ΄μ¤ μ¤€λΉ„

MySQLμ—μ„ `investor_portfolio_db` λ°μ΄ν„°λ² μ΄μ¤λ¥Ό μƒμ„±ν•©λ‹λ‹¤:

```sql
CREATE DATABASE investor_portfolio_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

## π€ μ‚¬μ© λ°©λ²•

### λ°μ΄ν„° μμ§‘ λ° μ €μ¥

```bash
python main.py
```

μ΄ λ…λ Ήμ–΄λ” μƒμ„ ν¬μμλ“¤μ ν¬νΈν΄λ¦¬μ¤ μ •λ³΄λ¥Ό μμ§‘ν•κ³  λ°μ΄ν„°λ² μ΄μ¤μ— μ €μ¥ν•©λ‹λ‹¤.

### λ¦¬ν¬νΈ μƒμ„±

```bash
python report_generator.py --investor BRK --date 2023-12-31
```

μ΄ λ…λ Ήμ–΄λ” νΉμ • ν¬μμμ νΉμ • λ‚ μ§ ν¬νΈν΄λ¦¬μ¤ λ°μ΄ν„°λ¥Ό μ‹κ°ν™”ν• HTML λ¦¬ν¬νΈλ¥Ό μƒμ„±ν•©λ‹λ‹¤.

## π“ ν”„λ΅μ νΈ κµ¬μ΅°

```
super-investor-report/
β”β”€β”€ main.py                   # λ©”μΈ μ‹¤ν–‰ νμΌ
β”β”€β”€ crawler.py                # μ›Ή ν¬λ΅¤λ§ λ¨λ“
β”β”€β”€ report_generator.py       # λ¦¬ν¬νΈ μƒμ„± λ¨λ“
β”β”€β”€ report_template.html      # λ¦¬ν¬νΈ ν…ν”λ¦Ώ
β”β”€β”€ requirements.txt          # μμ΅΄μ„± ν¨ν‚¤μ§€ λ©λ΅
β”β”€β”€ .env                      # ν™κ²½ λ³€μ νμΌ (gitμ—μ„ μ μ™Έλ¨)
β”β”€β”€ logs/                     # λ΅κ·Έ μ €μ¥ λ””λ ‰ν† λ¦¬
β”β”€β”€ report/                   # μƒμ„±λ λ¦¬ν¬νΈ HTML νμΌ
β””β”€β”€ utils/
    β”β”€β”€ db_manager.py         # λ°μ΄ν„°λ² μ΄μ¤ κ΄€λ¦¬ λ¨λ“
    β”β”€β”€ logger_util.py        # λ΅κΉ… μ ν‹Έλ¦¬ν‹° λ¨λ“
    β”β”€β”€ api_util.py           # API μ—°λ™ μ ν‹Έλ¦¬ν‹° λ¨λ“
    β””β”€β”€ telegram_util.py      # ν…”λ κ·Έλ¨ μ•λ¦Ό μ ν‹Έλ¦¬ν‹° λ¨λ“
```

## π—ƒοΈ λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§

### investor_portfolio ν…μ΄λΈ”

ν¬μμλ³„ ν¬νΈν΄λ¦¬μ¤ λ©”νƒ€ μ •λ³΄λ¥Ό μ €μ¥ν•©λ‹λ‹¤.

| ν•„λ“ | μ„¤λ… |
|------|------|
| idx | ν¬νΈν΄λ¦¬μ¤ λ©”νƒ€ κ³ μ  ID (PK) |
| investor_code | ν¬μμ μ½”λ“ (μ: AKO) |
| investor_name | ν¬μμ μ΄λ¦„ (μ: AKO Capital) |
| portfolio_date | ν¬νΈν΄λ¦¬μ¤ κΈ°μ¤€ λ‚ μ§ (μ: 2023-03-31) |
| portfolio_period | ν¬νΈν΄λ¦¬μ¤ κΈ°μ¤€ λ¶„κΈ° (μ: Q1 2023) |
| portfolio_value | μ΄ ν¬νΈν΄λ¦¬μ¤ κ°€μΉ (λ‹¬λ¬ λ‹¨μ„) |
| number_of_stocks | λ³΄μ  μΆ…λ© μ |
| record_created_at | λ μ½”λ“ μƒμ„± μ‹κ° |

### investor_portfolio_detail ν…μ΄λΈ”

ν¬νΈν΄λ¦¬μ¤μ μƒμ„Έ μΆ…λ© μ •λ³΄λ¥Ό μ €μ¥ν•©λ‹λ‹¤.

| ν•„λ“ | μ„¤λ… |
|------|------|
| idx | ν¬νΈν΄λ¦¬μ¤ μƒμ„Έ ν•­λ© κ³ μ  ID (PK) |
| p_idx | μ°Έμ΅°λλ” ν¬νΈν΄λ¦¬μ¤ λ©”νƒ€ ID (FK) |
| ticker | μΆ…λ© μ½”λ“ (μ: AAPL, MSFT) |
| stk_name | νμ‚¬λ… (μ: Apple Inc.) |
| portfolio_rate | ν•΄λ‹Ή μΆ…λ©μ΄ μ°¨μ§€ν•λ” ν¬νΈν΄λ¦¬μ¤ λ‚΄ λΉ„μ¤‘ (%) |
| recent_activity_type | μµκ·Ό ν™λ™ μ ν• (μ: buy, reduce, add) |
| recent_activity_value | μµκ·Ό ν™λ™ κ°’(%) (μ: 15, 2.86) |
| shares | λ³΄μ  μ£Όμ‹ μλ‰ |
| reported_price | λ³΄κ³ λ ν‰κ·  λ§¤μ… λ‹¨κ°€ |
| reported_value_amount | λ³΄κ³ λ μΆ…λ© κ°€μΉ (shares Γ— price) |
| current_price | ν„μ¬ μ£Όκ°€ |
| reported_price_rate | λ³΄κ³ κ°€ λ€λΉ„ ν„μ¬ λ³€ν™”μ¨ (%) |
| low_52_week | 52μ£Ό μµμ €κ°€ |
| high_52_week | 52μ£Ό μµκ³ κ°€ |
| record_created_at | λ μ½”λ“ μƒμ„± μ‹κ° |

## π“ λ¦¬ν¬νΈ μμ‹

ν”„λ΅μ νΈμ— ν¬ν•¨λ `report_template.html` νμΌμ„ μ‚¬μ©ν•μ—¬ λ‹¤μκ³Ό κ°™μ€ ν¬νΈν΄λ¦¬μ¤ μ‹κ°ν™” λ¦¬ν¬νΈλ¥Ό μƒμ„±ν•  μ μμµλ‹λ‹¤:

- ν¬νΈν΄λ¦¬μ¤ κµ¬μ„± λΉ„μ¤‘ λ„λ„› μ°¨νΈ
- μΆ…λ©λ³„ μƒμ„Έ μ •λ³΄ μΉ΄λ“
- μ”μ•½ ν†µκ³„ (μ΄ κ°€μΉ, μΆ…λ© μ, ν‰κ·  μμµλ¥  λ“±)

## π“ λ΅κΉ…

ν”„λ΅κ·Έλ¨ μ‹¤ν–‰ λ΅κ·Έλ” `logs` λ””λ ‰ν† λ¦¬μ— λ‚ μ§λ³„λ΅ μ €μ¥λ©λ‹λ‹¤. λ΅κ·Έ νμΌ ν•μ‹μ€ `YYYY-MM-DD_log.log`μ…λ‹λ‹¤.

## π” ν–¥ν›„ κ³„ν

- ν¬νΈν΄λ¦¬μ¤ λ³€λ™ μ¶”μ  λ° λ¶„μ„ κΈ°λ¥ μ¶”κ°€
- λ‹¤μ–‘ν• ν¬μμ κ²€μƒ‰ λ° ν•„ν„°λ§ κΈ°λ¥
- μ›Ή μΈν„°νμ΄μ¤ κµ¬ν„
- ν¬μ μ„±κ³Ό λ¶„μ„ λ° λΉ„κµ κΈ°λ¥
- μ£Όκ°€ λ°μ΄ν„° μ‹¤μ‹κ°„ μ—…λ°μ΄νΈ κΈ°λ¥